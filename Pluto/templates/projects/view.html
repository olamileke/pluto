{% extends 'layouts/app.html' %}

{% block title %} {{ project.name }} {% endblock %}


{% block css %}
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/Projects/view.css') }}">
{% endblock %}


{% block body %}
	
	<div class="ml-3 mr-5 mt-3 py-3 row title-header d-flex row" style='position:relative;'>
		<div class='col-3'>
			<img src="{{ g.URL }}/static/images/Projects/{{ project.picture }}">
		</div>
		<div class='d-flex flex-column py-2 col-5'>
			<p class='m-0 title mb-2'>{{ project.name }}</p>
			<p class='text-muted mb-3'>{{ project.about }}</p>
			<div class='py-2 loader mb-3' style='position:relative;'>
				<div class='loaded bg-success'></div>
			</div>
			<div class='d-flex'>
				<button class='btn btn-primary btn-sm py-2 mr-2' data-target='#newTaskModal' data-toggle="modal">Add Task</button>
				<a class='btn btn-info btn-sm py-2 mr-2' style='color:#fff;' href="{{ url_for('projects.edit', id=project.id) }}">Edit</a>
			</div>
		</div>
		{% if project.github_link != None %}
			<p class='link small text-muted'><i class='fa fa-link mr-1'></i> <a href="{{ project.github_link }}" target="new"> Github </a></p>
		{% endif %}
	</div>

	<div class='ml-3 mr-5 mt-4 px-2 task-container'>
		<p class='heading h5 mb-4 text-muted'>Tasks</p>
		{% for task in project.tasks %}

			<div class="custom-control custom-checkbox ml-1">
			    <input type="checkbox" class="custom-control-input" id="customControlInline">
			    <label class="custom-control-label text-muted" for="customControlInline"><p class='m-0 ml-1'>{{ task.name }}</p></label>
			    <div class='d-flex flex-column pl-1'>
			    	<p class='m-0 small'>Created {{ task.created_at.strftime("%d/%m/%Y %h:%M") }}</p>
			    </div>
			  </div>
		{% endfor %}
	</div>


	<div class="modal fade" tabindex="-1" role="dialog" id='newTaskModal'>
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		       	{{ project.name }} - New Task
		      </div>
		      <div class="modal-body px-3">
		      		
		      	    <form class='task-form' method='POST'>
		      	    	<div class='form-group w-100'>
		      	    		<input type="text" name="task" class='form-control form-control-sm mr-2' placeholder="Task">
		      	    	</div>
		      	    	<button type='button' style='background:#29AB87;color:#fff; font-size:0.9em;' class='py-1 d-flex align-items-center'>
		      	    		<p class='m-0 mr-2'>Add Task</p>
		      	    		<div class='loader d-none'></div>
		      	    	</button>
		      	    </form>  	
		      </div>
		      <div class="modal-footer">
		      	<button class='close-modal py-1 text-muted' style='background:#fff; font-family:"Quicksand", sans-serif; border:1px solid rgba(0,0,0,0.1)' data-dismiss="modal" id='submitBtn'>Close</button>
		      </div>
		    </div>
		  </div>
		</div>

{% endblock %}


{% block js %}
	
	<script type="text/javascript" src="{{ url_for('static', filename='js/Projects/view.js') }}"></script>
{% endblock %}